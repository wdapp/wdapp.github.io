(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00e82c22"],{"084c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"controls-wrapper",on:{click:t.handleControlsClick}},[n("common-danmaku",{ref:"danmaku",staticClass:"danmaku-wrap"}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"controls-top",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.onControlsTopClick(e))}}},[n("controls-back",{staticClass:"controls-back",on:{click:t.handleControlsClick}}),n("controls-button-group",{staticClass:"controls-button-group",attrs:{isSubShow:t.isSubShow,hideSwitchBtn:t.hideSwitchBtn},on:{click:t.handleControlsClick,switch:t.onSwitch,open:t.onOpen}}),n("controls-play",{staticClass:"controls-play",attrs:{playState:t.playState},on:{toggleplay:t.onTogglePlay,click:t.handleControlsClick}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"controls-bottom"},[n("controls-control",{attrs:{playState:t.playState,fullScreenState:t.screenState},on:{toggleplay:t.onTogglePlay,fullscreenclick:t.onFullScreen,change:t.onDanmakuChange}})],1)],1)},o=[],s=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2fa7")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"play-wrapper",class:{active:t.playState},on:{click:t.handlePlayClick}})},r=[],h={name:"Play",props:{playState:{type:Boolean,default:!1}},methods:{handlePlayClick:function(){this.$emit("toggleplay")}}},l=h,c=(n("8ee0"),n("2877")),u=Object(c["a"])(l,a,r,!1,null,"5de8f0e2",null),f=u.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{tag:"span",to:"/"}},[n("van-icon",{attrs:{name:"arrow-left",size:"25",color:"#FFFFFF"}})],1)},m=[],p={name:"Back"},g=p,w=Object(c["a"])(g,d,m,!1,null,null,null),y=w.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control-wrapper"},[n("div",{staticClass:"control-left"},[n("div",{staticClass:"play-wrap",on:{click:t.handlePlayClick}},[n("span",{staticClass:"play-icon",class:{active:t.playState}})])]),n("div",{staticClass:"control-right"},[n("ul",{staticClass:"btn-group"},[n("li",{staticClass:"item full-screen-wrap"},[n("span",{staticClass:"full-screen-icon",class:{active:t.screenStatus},on:{click:t.handleFullScreenClick}})]),n("li",{staticClass:"item barrage-wrap"},[n("van-switch",{staticClass:"barrage-btn",attrs:{size:"0.53333rem","active-color":"#2196F3","inactive-color":"#999999"},on:{change:t.onChange},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1)])])])},k=[],C={name:"Control",props:{playState:{type:Boolean,default:!1},screenStatus:{type:Boolean,default:!1}},data:function(){return{checked:!1}},methods:{handlePlayClick:function(){this.$emit("toggleplay")},handleFullScreenClick:function(){this.$emit("fullscreenclick")},onChange:function(t){this.$emit("change",t)}}},b=C,M=(n("9680"),Object(c["a"])(b,v,k,!1,null,"c53d83c6",null)),x=M.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"button-group-wrapper"},[t._m(0),n("li",{staticClass:"item switch-btn-wrap",on:{click:t.handlSwitchClick}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.hideSwitchBtn,expression:"hideSwitchBtn"}],staticClass:"switch-btn-icon",class:{"switch-active":!t.isSubShow}})])])},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"item share-btn-wrap"},[n("span",{staticClass:"share-btn-icon"})])}],P={name:"ButtonGroup",props:{isSubShow:{type:Boolean,default:!0},hideSwitchBtn:{type:Boolean,default:!0}},data:function(){return{toggle:!0}},methods:{handlSwitchClick:function(){var t=this.isSubShow;t?this.switchWindows():this.openSubWindows()},switchWindows:function(){this.toggle=!this.toggle,this.$emit("switch",this.toggle)},openSubWindows:function(){this.$emit("open")}}},S=P,B=(n("dc28"),Object(c["a"])(S,I,D,!1,null,"21156dbc",null)),F=B.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{attrs:{id:"cvs"}},[t._v("您浏览器不支持canvas，建议使用google浏览器")])},O=[],E=(n("a9e3"),n("acd8"),function(){function t(t,e){this.isPause=!1,this.lastRenderTime=0,this.mDanmuTracks=new Array,this.mCanvas=t,this.mDanmukuConfig=e,this.mCtx=t.getContext("2d"),this.initRender()}return t.prototype.addDanmuTrack=function(t){this.mDanmuTracks.push(t),t.setDanmaku(this)},t.prototype.removeDanmuTrack=function(t){this.mDanmuTracks=this.mDanmuTracks.filter((function(e){return e!==t}))},t.prototype.initRender=function(){this.mCanvas.width=this.mDanmukuConfig.width,this.mCanvas.height=this.mDanmukuConfig.height,window.requestAnimationFrame?this.renderByAnimationFrame():this.renderBySetInterval()},t.prototype.renderByAnimationFrame=function(){this.render(),requestAnimationFrame(this.renderByAnimationFrame.bind(this))},t.prototype.renderBySetInterval=function(){setInterval(this.render.bind(this),0)},t.prototype.render=function(){if(!this.isPause){this.mCtx.clearRect(0,0,this.mCanvas.width,this.mCanvas.height);for(var t=0,e=this.mDanmuTracks;t<e.length;t++){var n=e[t];n.render(this.mCtx)}}},t.prototype.start=function(){this.isPause=!1},t.prototype.pause=function(){this.isPause=!0},t}()),T=function(){function t(t){this.mPoolSize=20,this.mMessagePool=new Array(this.mPoolSize),t&&(this.mPoolSize=t,this.mMessagePool=new Array(this.mPoolSize))}return t.prototype.addMessage=function(t){this.addMessages([t])},t.prototype.getMessage=function(){for(var t=null,e=0;e<this.mMessagePool.length;e++)if(this.mMessagePool[e]&&this.mMessagePool[e].created){t=this.mMessagePool[e],this.mMessagePool[e]=null;break}return t},t.prototype.addMessages=function(t){void 0===t&&(t=[]);for(var e=0;e<t.length;e++)for(var n=0;n<this.mMessagePool.length;n++)if(!this.mMessagePool[n]){this.mMessagePool[n]=t[e],this.mMessagePool[n]&&this.mMessagePool[n].onBaseCreate();break}},t.prototype.removeMessage=function(t){var e=this.mMessagePool.findIndex((function(e){return e===t}));this.removeMessageByIndex(e)},t.prototype.removeMessageByIndex=function(t){Number.isInteger(t)&&t>0&&(this.mMessagePool[t]=null)},t}(),z=function(){function t(t,e){this.mDanmaMessages=new Array,this.mTrackInfo={maxWidth:0,top:0,height:0},this.mDanmuTrackConfig={top:0,height:0},this.mDanmuPool=t,this.initConfig(e)}return t.prototype.setDanmaku=function(t){this.mDanmaku=t},t.prototype.initConfig=function(t){this.mDanmuTrackConfig=t,this.mTrackInfo.top=t.top,this.mTrackInfo.height=t.height},t.prototype.render=function(t){this.refreshMessage(t);for(var e=0;e<this.mDanmaMessages.length;e++){var n=this.mDanmaMessages[e];n.onBaseMeasure(t,this.mTrackInfo),n.onBaseLayout(t,this.mTrackInfo),n.onBaseDraw(t,this.mTrackInfo),n.onBaseDestroyed(),e===this.mDanmaMessages.length-1&&(this.mTrackInfo.maxWidth=n.position.left+n.size.width)}},t.prototype.refreshMessage=function(t){this.removeMessage(),this.AddMessage(t)},t.prototype.AddMessage=function(t){if(this.mTrackInfo.maxWidth<t.canvas.width-10){var e=this.mDanmuPool.getMessage();e&&(console.log(e),this.mDanmaMessages.push(e))}},t.prototype.removeMessage=function(){this.mDanmaMessages=this.mDanmaMessages.filter((function(t){return!t.distoryed}))},t}(),A=function(t,e){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},A(t,e)};function j(t,e){function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function V(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{h(i.next(t))}catch(e){s(e)}}function r(t){try{h(i["throw"](t))}catch(e){s(e)}}function h(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,r)}h((i=i.apply(t,e||[])).next())}))}function L(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(t){return function(e){return h([t,e])}}function h(s){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,i&&(o=2&s[0]?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var $=function(){function t(){this.created=!1,this.distoryed=!1,this.isLayout=!1,this.position={top:0,left:0},this.size={width:0,height:0}}return t.prototype.onBaseCreate=function(){var t=this;this.onCreate((function(e){e?t.created=!0:t.distoryed=!0}))},t.prototype.onBaseDestroyed=function(){this.distoryed=this.onDestroyed()},t.prototype.onBaseMeasure=function(t,e){this.size=this.onMeasure(t,e)},t.prototype.onBaseLayout=function(t,e){this.position=this.onLayout(t,e)},t.prototype.onBaseDraw=function(t,e){this.onDraw(t,e)},t}(),G=function(t){function e(e){var n=t.call(this)||this;return n.textMessageConfig={mMsg:"",color:"#FFF",strokeColor:"#000",fontSize:30,fontFamily:"黑体"},n.textMessageConfig=Object.assign({},n.textMessageConfig,e),n}return j(e,t),e.prototype.onCreate=function(t){t(!0)},e.prototype.onMeasure=function(t,e){t.textAlign="left",t.textBaseline="middle",t.font=this.textMessageConfig.fontSize+"px "+this.textMessageConfig.fontFamily;var n=t.measureText(this.textMessageConfig.mMsg);return{width:n.width,height:e.height}},e.prototype.onLayout=function(t,e){return this.isLayout?(this.position.left-=3,this.position):(this.isLayout=!0,{top:e.top+e.height/2,left:t.canvas.width})},e.prototype.onDraw=function(t,e){t.fillStyle=this.textMessageConfig.strokeColor,t.strokeText(this.textMessageConfig.mMsg,this.position.left,this.position.top),t.fillStyle=this.textMessageConfig.color,t.fillText(this.textMessageConfig.mMsg,this.position.left,this.position.top)},e.prototype.onDestroyed=function(){return this.position.left<-this.size.width},e}($),R=function(t){function e(e){var n=t.call(this)||this;return n.ImgMessageConfig={url:"",width:0,height:0},n.mImg=new Image,n.ImgMessageConfig=Object.assign({},n.ImgMessageConfig,e),n}return j(e,t),e.prototype.onCreate=function(t){var e=this;this.mImg.onload=function(){e.ImgMessageConfig.width=e.ImgMessageConfig.width||e.mImg.width||300,e.ImgMessageConfig.height=e.ImgMessageConfig.height||e.mImg.height||200,t(!0)},this.mImg.onerror=function(){document.body.removeChild(e.mImg),t(!1)},this.mImg.src=this.ImgMessageConfig.url,this.mImg.style.position="fixed",this.mImg.style.top="-1000px",this.mImg.style.left="-1000px",document.body.appendChild(this.mImg)},e.prototype.onMeasure=function(t,e){return{width:this.ImgMessageConfig.width,height:this.ImgMessageConfig.height}},e.prototype.onLayout=function(t,e){return this.isLayout?(this.position.left-=3,this.position):(this.isLayout=!0,{top:e.top,left:t.canvas.width})},e.prototype.onDraw=function(t,e){t.drawImage(this.mImg,this.position.left,this.position.top,this.size.width,this.size.height)},e.prototype.onDestroyed=function(){var t=this.position.left<-this.size.width;return t&&document.body.removeChild(this.mImg),t},e}($);function W(t){return V(this,void 0,void 0,(function(){var e,n,i;return L(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch(t.url)];case 1:return e=o.sent(),[4,e.arrayBuffer()];case 2:return n=o.sent(),t.callback(null,n),[3,4];case 3:return i=o.sent(),t.callback(i,new ArrayBuffer(0)),[3,4];case 4:return[2]}}))}))}function N(t,e){return e={exports:{}},t(e,e.exports),e.exports}var U=N((function(t,e){function n(t,e,n,o){var s=0,a=(o=void 0===o?{}:o,void 0===o.loop?null:o.loop),r=void 0===o.palette?null:o.palette;if(e<=0||n<=0||e>65535||n>65535)throw new Error("Width/Height invalid.");function h(t){var e=t.length;if(e<2||e>256||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}t[s++]=71,t[s++]=73,t[s++]=70,t[s++]=56,t[s++]=57,t[s++]=97;var l=0,c=0;if(null!==r){var u=h(r);while(u>>=1)++l;if(u=1<<l,--l,void 0!==o.background){if(c=o.background,c>=u)throw new Error("Background index out of range.");if(0===c)throw new Error("Background index explicitly passed as 0.")}}if(t[s++]=255&e,t[s++]=e>>8&255,t[s++]=255&n,t[s++]=n>>8&255,t[s++]=(null!==r?128:0)|l,t[s++]=c,t[s++]=0,null!==r)for(var f=0,d=r.length;f<d;++f){var m=r[f];t[s++]=m>>16&255,t[s++]=m>>8&255,t[s++]=255&m}if(null!==a){if(a<0||a>65535)throw new Error("Loop count invalid.");t[s++]=33,t[s++]=255,t[s++]=11,t[s++]=78,t[s++]=69,t[s++]=84,t[s++]=83,t[s++]=67,t[s++]=65,t[s++]=80,t[s++]=69,t[s++]=50,t[s++]=46,t[s++]=48,t[s++]=3,t[s++]=1,t[s++]=255&a,t[s++]=a>>8&255,t[s++]=0}var p=!1;this.addFrame=function(e,n,o,a,l,c){if(!0===p&&(--s,p=!1),c=void 0===c?{}:c,e<0||n<0||e>65535||n>65535)throw new Error("x/y invalid.");if(o<=0||a<=0||o>65535||a>65535)throw new Error("Width/Height invalid.");if(l.length<o*a)throw new Error("Not enough pixels for the frame size.");var u=!0,f=c.palette;if(void 0!==f&&null!==f||(u=!1,f=r),void 0===f||null===f)throw new Error("Must supply either a local or global palette.");var d=h(f),m=0;while(d>>=1)++m;d=1<<m;var g=void 0===c.delay?0:c.delay,w=void 0===c.disposal?0:c.disposal;if(w<0||w>3)throw new Error("Disposal out of range.");var y=!1,v=0;if(void 0!==c.transparent&&null!==c.transparent&&(y=!0,v=c.transparent,v<0||v>=d))throw new Error("Transparent color index.");if((0!==w||y||0!==g)&&(t[s++]=33,t[s++]=249,t[s++]=4,t[s++]=w<<2|(!0===y?1:0),t[s++]=255&g,t[s++]=g>>8&255,t[s++]=v,t[s++]=0),t[s++]=44,t[s++]=255&e,t[s++]=e>>8&255,t[s++]=255&n,t[s++]=n>>8&255,t[s++]=255&o,t[s++]=o>>8&255,t[s++]=255&a,t[s++]=a>>8&255,t[s++]=!0===u?128|m-1:0,!0===u)for(var k=0,C=f.length;k<C;++k){var b=f[k];t[s++]=b>>16&255,t[s++]=b>>8&255,t[s++]=255&b}return s=i(t,s,m<2?2:m,l),s},this.end=function(){return!1===p&&(t[s++]=59,p=!0),s},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(e){t=e},this.getOutputBufferPosition=function(){return s},this.setOutputBufferPosition=function(t){s=t}}function i(t,e,n,i){t[e++]=n;var o=e++,s=1<<n,a=s-1,r=s+1,h=r+1,l=n+1,c=0,u=0;function f(n){while(c>=n)t[e++]=255&u,u>>=8,c-=8,e===o+256&&(t[o]=255,o=e++)}function d(t){u|=t<<c,c+=l,f(8)}var m=i[0]&a,p={};d(s);for(var g=1,w=i.length;g<w;++g){var y=i[g]&a,v=m<<8|y,k=p[v];if(void 0===k){u|=m<<c,c+=l;while(c>=8)t[e++]=255&u,u>>=8,c-=8,e===o+256&&(t[o]=255,o=e++);4096===h?(d(s),h=r+1,l=n+1,p={}):(h>=1<<l&&++l,p[v]=h++),m=y}else m=k}return d(m),d(r),f(1),o+1===e?t[o]=0:(t[o]=e-o-1,t[e++]=0),e}function o(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!==(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,o=t[e++],a=o>>7,r=7&o,h=1<<r+1;t[e++];t[e++];var l=null,c=null;a&&(l=e,c=h,e+=3*h);var u=!0,f=[],d=0,m=null,p=0,g=null;this.width=n,this.height=i;while(u&&e<t.length)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,g=t[e++]|t[e++]<<8,e++;else{e+=12;while(1){var w=t[e++];if(!(w>=0))throw Error("Invalid block size");if(0===w)break;e+=w}}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,m=t[e++],0===(1&y)&&(m=null),p=y>>2&7,e++;break;case 254:while(1){w=t[e++];if(!(w>=0))throw Error("Invalid block size");if(0===w)break;e+=w}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,M=t[e++],x=M>>7,I=M>>6&1,D=7&M,P=1<<D+1,S=l,B=c,F=!1;if(x){F=!0;S=e,B=P,e+=3*P}var _=e;e++;while(1){w=t[e++];if(!(w>=0))throw Error("Invalid block size");if(0===w)break;e+=w}f.push({x:v,y:k,width:C,height:b,has_local_palette:F,palette_offset:S,palette_size:B,data_offset:_,data_length:e-_,transparent_index:m,interlaced:!!I,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return g},this.frameInfo=function(t){if(t<0||t>=f.length)throw new Error("Frame index out of range.");return f[t]},this.decodeAndBlitFrameBGRA=function(e,i){var o=this.frameInfo(e),a=o.width*o.height,r=new Uint8Array(a);s(t,o.data_offset,r,a);var h=o.palette_offset,l=o.transparent_index;null===l&&(l=256);var c=o.width,u=n-c,f=c,d=4*(o.y*n+o.x),m=4*((o.y+o.height)*n+o.x),p=d,g=4*u;!0===o.interlaced&&(g+=4*n*7);for(var w=8,y=0,v=r.length;y<v;++y){var k=r[y];if(0===f&&(p+=g,f=c,p>=m&&(g=4*u+4*n*(w-1),p=d+(c+u)*(w<<1),w>>=1)),k===l)p+=4;else{var C=t[h+3*k],b=t[h+3*k+1],M=t[h+3*k+2];i[p++]=M,i[p++]=b,i[p++]=C,i[p++]=255}--f}},this.decodeAndBlitFrameRGBA=function(e,i){var o=this.frameInfo(e),a=o.width*o.height,r=new Uint8Array(a);s(t,o.data_offset,r,a);var h=o.palette_offset,l=o.transparent_index;null===l&&(l=256);var c=o.width,u=n-c,f=c,d=4*(o.y*n+o.x),m=4*((o.y+o.height)*n+o.x),p=d,g=4*u;!0===o.interlaced&&(g+=4*n*7);for(var w=8,y=0,v=r.length;y<v;++y){var k=r[y];if(0===f&&(p+=g,f=c,p>=m&&(g=4*u+4*n*(w-1),p=d+(c+u)*(w<<1),w>>=1)),k===l)p+=4;else{var C=t[h+3*k],b=t[h+3*k+1],M=t[h+3*k+2];i[p++]=C,i[p++]=b,i[p++]=M,i[p++]=255}--f}}}function s(t,e,n,i){var o=t[e++],s=1<<o,a=s+1,r=a+1,h=o+1,l=(1<<h)-1,c=0,u=0,f=0,d=t[e++],m=new Int32Array(4096),p=null;while(1){while(c<16){if(0===d)break;u|=t[e++]<<c,c+=8,1===d?d=t[e++]:--d}if(c<h)break;var g=u&l;if(u>>=h,c-=h,g!==s){if(g===a)break;var w=g<r?g:p,y=0,v=w;while(v>s)v=m[v]>>8,++y;var k=v,C=f+y+(w!==g?1:0);if(C>i)return void console.log("Warning, gif stream longer than expected.");n[f++]=k,f+=y;var b=f;w!==g&&(n[f++]=k),v=w;while(y--)v=m[v],n[--b]=255&v,v>>=8;null!==p&&r<4096&&(m[r++]=p<<8|k,r>=l+1&&h<12&&(++h,l=l<<1|1)),p=g}else r=a+1,h=o+1,l=(1<<h)-1,p=null}return f!==i&&console.log("Warning, gif stream shorter than expected."),n}try{e.GifWriter=n,e.GifReader=o}catch(a){}})),H=(U.GifWriter,U.GifReader,function(t){function e(e){var n=t.call(this)||this;return n.ImgMessageConfig={url:"",width:0,height:0},n.numFrames=0,n.currentFrameIndex=0,n.pixels=new Uint8ClampedArray(0),n.lastFrameDate=(new Date).getTime(),n.ImgMessageConfig=Object.assign({},n.ImgMessageConfig,e),n}j(e,t),e.prototype.onCreate=function(t){var e=this;W({url:this.ImgMessageConfig.url,callback:function(n,i){n?(console.log(n),t(!1)):e.newMethod(i)}})},e.prototype.newMethod=function(t){this.mGifReader=new U.GifReader(t),this.numFrames=this.mGifReader.numFrames();var e=this.mGifReader.frameInfo(0),n=[e.width,e.height],i=n[0],o=n[1];this.pixels=new Uint8ClampedArray(i*o*4)},e.prototype.onMeasure=function(t,e){var n=this.mGifReader;this.currentFrameIndex>=this.numFrames&&(this.currentFrameIndex=0);this.ImgMessageConfig.width,this.ImgMessageConfig.height;return n&&(n.frameInfo(this.currentFrameIndex),n.decodeAndBlitFrameRGBA(this.currentFrameIndex,this.pixels)),{width:this.ImgMessageConfig.width,height:this.ImgMessageConfig.height}},e.prototype.onLayout=function(t,e){return this.isLayout?(this.position.left-=3,this.position):(this.isLayout=!0,{top:e.top,left:t.canvas.width})},e.prototype.onDraw=function(t,e){var n=new ImageData(this.pixels,this.size.width,this.size.height);t.putImageData(n,this.position.left,this.position.top)},e.prototype.onDestroyed=function(){var t=this.position.left<-this.size.width;return t}}($),function(t){function e(e){var n=t.call(this)||this;return n.VideoMessageConfig={url:"",width:300,height:200},n.mIsPlay=!1,n.mVideo=document.createElement("video"),n.VideoMessageConfig=Object.assign({},n.VideoMessageConfig,e),n}return j(e,t),e.prototype.onCreate=function(t){var e=this;this.mVideo.addEventListener("canplay",(function(){t(!0)})),this.mVideo.addEventListener("error",(function(){document.body.removeChild(e.mVideo),t(!1)})),this.mVideo.src=this.VideoMessageConfig.url,this.mVideo.style.position="fixed",this.mVideo.style.top="-4000px",this.mVideo.style.left="-4000px",this.mVideo.preload="auto",this.mVideo.loop=!0,document.body.appendChild(this.mVideo)},e.prototype.onMeasure=function(t,e){return this.mIsPlay||(this.mIsPlay=!0,this.mVideo.play()),{width:this.VideoMessageConfig.width,height:this.VideoMessageConfig.height}},e.prototype.onLayout=function(t,e){return console.log(this.size),this.isLayout?(this.position.left-=3,this.position):(this.isLayout=!0,{top:e.top,left:t.canvas.width})},e.prototype.onDraw=function(t,e){t.drawImage(this.mVideo,this.position.left,this.position.top,this.size.width,this.size.height)},e.prototype.onDestroyed=function(){var t=this.position.left<-this.size.width;return t&&document.body.removeChild(this.mVideo),t},e}($)),q={name:"Danmaku",props:{height:{type:Number,default:231},width:{type:Number,default:window.innerWidth}},computed:{remHeight:function(){var t=this.height,e=75,n=document.getElementsByTagName("html")[0].style.fontSize;return t/e*parseFloat(n)}},data:function(){return{danmaku:{},danmakuPool:{msg:{},img:{},video:{}}}},methods:{init:function(){var t=document.getElementById("cvs");this.danmaku=new E(t,{width:this.width,height:this.remHeight}),this.createDanmakuPool(),this.createImgDanmakuPool(),this.createVideoDanmakuPool(),this.danmaku.start()},createDanmakuPool:function(){for(var t=new T(300),e=0;e<6;e++){var n=new z(t,{top:40*e+10,height:30});this.danmaku.addDanmuTrack(n),this.danmakuPool.msg=t}},createImgDanmakuPool:function(){var t=new T(10),e=new z(t,{top:20,height:40});this.danmaku.addDanmuTrack(e),this.danmakuPool.img=t},createVideoDanmakuPool:function(){var t=new T(10),e=new z(t,{top:200,height:200});this.danmaku.addDanmuTrack(e),this.danmakuPool.video=t},sendDanmaku:function(t){this.danmakuPool.msg.addMessage(new G({mMsg:t.msg,color:t.color||"#FFF",strokeColor:t.strokeColor||"#000",fontSize:t.fontSize||16,fontFamily:t.fontFamily||"PingFang SC"}))},sendImgDanmaku:function(t){var e=new R({url:t.url||"https://github.wdapp.top/github/res/images/icon/CC_144_144.png",width:t.width||70,height:t.height||70});this.danmakuPool.img.addMessage(e)},sendVideoDanmaku:function(t){var e=new H({url:t.url||"https://vjs.zencdn.net/v/oceans.mp4",width:t.width||300,height:t.height||200});this.danmakuPool.video.addMessage(e)},handlePause:function(){this.danmaku.pause()},handleStart:function(){this.danmaku.start()}},mounted:function(){this.init()}},J=q,K=(n("3181"),Object(c["a"])(J,_,O,!1,null,"67c696e0",null)),Q=K.exports,X=n("2f62"),Y=n("aff8");function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(n,!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var et={name:"Controls",mixins:[Y["a"]],components:{ControlsPlay:f,ControlsBack:y,ControlsControl:x,ControlsButtonGroup:F,CommonDanmaku:Q},props:{isSubShow:{type:Boolean,default:!0},hideSwitchBtn:{type:Boolean,default:!0}},data:function(){return{show:!0,checked:!1}},computed:tt({},Object(X["d"])(["playState","screenState"]),{danmaku:function(){return this.$refs.danmaku}}),methods:{onSwitch:function(t){this.$emit("switch",t)},onOpen:function(){this.$emit("open")},handleControlsClick:function(){this.show=!0,this.$emit("show",this.show),this.start()},onControlsTopClick:function(){this.show=!1,this.$emit("show",this.show),this.abort()},start:function(){var t=this;this.delay((function(){t.show=!1,t.$emit("show",t.show)}))},onTogglePlay:function(){this.emit("toggleplay")},onFullScreen:function(){this.emit("fullscreenclick")},onDanmakuChange:function(t){this.checked=t},sendDanmaku:function(t){this.checked&&this.danmaku.sendDanmaku({msg:t})},addEvents:function(){var t=this;this.on("danmaku",(function(e){t.sendDanmaku(e)}))}},mounted:function(){this.start(),this.addEvents()}},nt=et,it=(n("a049"),Object(c["a"])(nt,i,o,!1,null,"a28b73de",null));e["default"]=it.exports},1772:function(t,e,n){},3181:function(t,e,n){"use strict";var i=n("1772"),o=n.n(i);o.a},6558:function(t,e,n){},"7cb9":function(t,e,n){},"8ee0":function(t,e,n){"use strict";var i=n("c133"),o=n.n(i);o.a},9680:function(t,e,n){"use strict";var i=n("7cb9"),o=n.n(i);o.a},"995e":function(t,e,n){},a049:function(t,e,n){"use strict";var i=n("995e"),o=n.n(i);o.a},c133:function(t,e,n){},dc28:function(t,e,n){"use strict";var i=n("6558"),o=n.n(i);o.a}}]);
//# sourceMappingURL=chunk-00e82c22.de86de8f.js.map